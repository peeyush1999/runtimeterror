{% extends 'adminsidebar.html'%}

{% block rightpanel %}
<link rel="stylesheet" href="../static/css/teams.css">
<link rel="stylesheet" href="../static/css/sticky.css">
<link rel="stylesheet" href="../static/css/emphasis.css">

<div style="overflow: hidden">

  <p id="destroyInit" class="init">
  </p>

  <main class="page-content">
    <div class="container">


      <div class="animated animatedFadeInUp fadeInUp" id="empathizeheading">
        <h2 align="center" style="margin-right: 140px;">Teams</h2>
        <br>
        <br>
        <p1 align="center" style="margin-right: 140px;">To create teams for the workshop - Enter the count<br> of members in team and then click on create.</p1>
        <br>
        <br>
        <form id="myForm" method="POST">
          <input type="number" min="1" placeholder="count" name="count" id ="myform">
        </form>
        <br>
        <br>
        <div class="button" style="padding-right: 120px;">
        <button style="font-size:30px; padding-right: 100px; padding-left:100px; color: rgb(36, 5, 65);" id="b1">CREATE</button>
        </div>
      </div>





      <div id="wrapper"></div>

      <section id="content">





        <section align="center">

          <div id="accordion">

          </div>

        </section>
      </section>

    </div>
  </main>

</div>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="../static/js/demo.js"></script>
<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', () => {
    button = document.getElementById('b1');
    button.onclick = () => {
      var elements = document.getElementById("myForm").elements;
      var formjson = {};
      for (var i = 0; i < elements.length; i++) {
        var item = elements.item(i);
        formjson[item.name] = item.value;
      }
      console.log(formjson)
      const request = new XMLHttpRequest();
      request.open('POST', "/admin/createTeams");
      request.setRequestHeader('Content-type', 'application/json');
      request.onload = () => {
        const response = request.responseText;
        console.log(response)
        const obj = JSON.parse(response)
        const container = document.getElementById('accordion');
        $('.box').remove();
        for (let x in obj) {
          console.log(x)
          const ul = document.createElement('ul');
          ul.className = "box"//add class here to change ui
          for (let y in obj[x]) {
            var li = document.createElement("li");
            li.appendChild(document.createTextNode(obj[x][y]));
            ul.appendChild(li);
          }
          container.appendChild(ul);
        }
      };
      // JSON.stringify({ "count": count })
      request.send(JSON.stringify(formjson));
    };
  });
</script>
{% endblock %}